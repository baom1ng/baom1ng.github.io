{"title":"Dockerfile","uid":"75603112ad785d198fb30f0b34b1d632","slug":"Dockerflie","date":"2022-10-01T06:21:20.000Z","updated":"2022-10-24T08:23:39.316Z","comments":true,"path":"api/articles/Dockerflie.json","keywords":"Brevin, blog, 技术, 博客","cover":"/images/Dockerflie/image-20221024134827132.png","content":"<h2 id=\"Dockerfile\"><a href=\"#Dockerfile\" class=\"headerlink\" title=\"Dockerfile\"></a>Dockerfile</h2><h3 id=\"1-什么是Dockerfile\"><a href=\"#1-什么是Dockerfile\" class=\"headerlink\" title=\"1. 什么是Dockerfile\"></a>1. 什么是Dockerfile</h3><p>Dockerfile可以认为是<strong>Docker镜像的描述文件，是由一系列命令和参数构成的脚本</strong>。主要作用是<strong>用来构建docker镜像的构建文件</strong>。</p>\n<p><img src=\"/images/Dockerflie/image-20221024134827132.png\" alt=\"image-20221024134827132\"></p>\n<ul>\n<li><strong>通过架构图可以看出通过DockerFile可以直接构建镜像</strong></li>\n</ul>\n<h3 id=\"2-Dockerfile解析过程\"><a href=\"#2-Dockerfile解析过程\" class=\"headerlink\" title=\"2. Dockerfile解析过程\"></a>2. Dockerfile解析过程</h3><p><img src=\"/images/Dockerflie/image-20200603181253804.png\" alt=\"image-20200603181253804\"></p>\n<h3 id=\"3-Dockerfile的保留命令\"><a href=\"#3-Dockerfile的保留命令\" class=\"headerlink\" title=\"3 .Dockerfile的保留命令\"></a>3 .Dockerfile的保留命令</h3><p>官方说明:<a href=\"https://docs.docker.com/engine/reference/builder/\">https://docs.docker.com/engine/reference/builder/</a></p>\n<table>\n<thead>\n<tr>\n<th>保留字</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>FROM</strong></td>\n<td><strong>当前镜像是基于哪个镜像的</strong> <code>第一个指令必须是FROM</code></td>\n</tr>\n<tr>\n<td>MAINTAINER</td>\n<td>镜像维护者的姓名和邮箱地址</td>\n</tr>\n<tr>\n<td><strong>RUN</strong></td>\n<td><strong>构建镜像时需要运行的指令</strong></td>\n</tr>\n<tr>\n<td><strong>EXPOSE</strong></td>\n<td><strong>当前容器对外暴露出的端口号</strong></td>\n</tr>\n<tr>\n<td><strong>WORKDIR</strong></td>\n<td><strong>指定在创建容器后，终端默认登录进来的工作目录，一个落脚点</strong></td>\n</tr>\n<tr>\n<td><strong>ENV</strong></td>\n<td><strong>用来在构建镜像过程中设置环境变量</strong></td>\n</tr>\n<tr>\n<td><strong>ADD</strong></td>\n<td><strong>将宿主机目录下的文件拷贝进镜像且ADD命令会自动处理URL和解压tar包</strong></td>\n</tr>\n<tr>\n<td><strong>COPY</strong></td>\n<td><strong>类似于ADD，拷贝文件和目录到镜像中<br/>将从构建上下文目录中&lt;原路径&gt;的文件/目录复制到新的一层的镜像内的&lt;目标路径&gt;位置</strong></td>\n</tr>\n<tr>\n<td><strong>VOLUME</strong></td>\n<td><strong>容器数据卷，用于数据保存和持久化工作</strong></td>\n</tr>\n<tr>\n<td><strong>CMD</strong></td>\n<td><strong>指定一个容器启动时要运行的命令<br/>Dockerfile中可以有多个CMD指令，但只有最后一个生效，CMD会被docker run之后的参数替换</strong></td>\n</tr>\n<tr>\n<td><strong>ENTRYPOINT</strong></td>\n<td><strong>指定一个容器启动时要运行的命令<br/>ENTRYPOINT的目的和CMD一样，都是在指定容器启动程序及其参数</strong></td>\n</tr>\n</tbody></table>\n<h4 id=\"3-1-FROM-命令\"><a href=\"#3-1-FROM-命令\" class=\"headerlink\" title=\"3.1 FROM 命令\"></a>3.1 FROM 命令</h4><ul>\n<li><p>基于那个镜像进行构建新的镜像,在构建时会自动从docker hub拉取base镜像 必须作为Dockerfile的第一个指令出现</p>\n</li>\n<li><p>语法:</p>\n  <figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span>  &lt;image&gt;</span><br><span class=\"line\"><span class=\"keyword\">FROM</span>  &lt;image&gt;[:&lt;tag&gt;]     使用版本不写为latest</span><br><span class=\"line\"><span class=\"keyword\">FROM</span>  &lt;image&gt;[@&lt;digest&gt;]  使用摘要</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"3-2-MAINTAINER-命令\"><a href=\"#3-2-MAINTAINER-命令\" class=\"headerlink\" title=\"3.2 MAINTAINER  命令\"></a>3.2 MAINTAINER  命令</h4><ul>\n<li><p>镜像维护者的姓名和邮箱地址[废弃]</p>\n</li>\n<li><p>语法:</p>\n  <figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">MAINTAINER</span> &lt;name&gt;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"3-3-RUN-命令\"><a href=\"#3-3-RUN-命令\" class=\"headerlink\" title=\"3.3 RUN 命令\"></a>3.3 RUN 命令</h4><ul>\n<li><p>RUN指令将在当前映像之上的新层中执行任何命令并提交结果。生成的提交映像将用于Dockerfile中的下一步</p>\n</li>\n<li><p>语法:</p>\n  <figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> &lt;<span class=\"built_in\">command</span>&gt; (shell form, the <span class=\"built_in\">command</span> is run <span class=\"keyword\">in</span> a shell, <span class=\"built_in\">which</span> by default is /bin/sh -c on Linux or cmd /S /C on Windows)</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> <span class=\"built_in\">echo</span> hello</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> [<span class=\"string\">&quot;executable&quot;</span>, <span class=\"string\">&quot;param1&quot;</span>, <span class=\"string\">&quot;param2&quot;</span>] (<span class=\"built_in\">exec</span> form)</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> [<span class=\"string\">&quot;/bin/bash&quot;</span>, <span class=\"string\">&quot;-c&quot;</span>, <span class=\"string\">&quot;echo hello&quot;</span>]</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"3-4-EXPOSE-命令\"><a href=\"#3-4-EXPOSE-命令\" class=\"headerlink\" title=\"3.4 EXPOSE 命令\"></a>3.4 EXPOSE 命令</h4><ul>\n<li><p>用来指定构建的镜像在运行为容器时对外暴露的端口</p>\n</li>\n<li><p>语法:</p>\n  <figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">EXPOSE</span> <span class=\"number\">80</span>/tcp  如果没有显示指定则默认暴露都是tcp</span><br><span class=\"line\"><span class=\"keyword\">EXPOSE</span> <span class=\"number\">80</span>/udp</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"3-5-CMD-命令\"><a href=\"#3-5-CMD-命令\" class=\"headerlink\" title=\"3.5 CMD 命令\"></a>3.5 CMD 命令</h4><ul>\n<li><p>用来为启动的容器指定执行的命令,在Dockerfile中只能有一条CMD指令。如果列出多个命令，则只有最后一个命令才会生效。</p>\n</li>\n<li><p>注意: <strong>Dockerfile中只能有一条CMD指令。如果列出多个命令，则只有最后一个命令才会生效。</strong></p>\n</li>\n<li><p>语法:</p>\n  <figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CMD</span><span class=\"language-bash\"> [<span class=\"string\">&quot;executable&quot;</span>,<span class=\"string\">&quot;param1&quot;</span>,<span class=\"string\">&quot;param2&quot;</span>] (<span class=\"built_in\">exec</span> form, this is the preferred form)</span></span><br><span class=\"line\"><span class=\"keyword\">CMD</span><span class=\"language-bash\"> [<span class=\"string\">&quot;param1&quot;</span>,<span class=\"string\">&quot;param2&quot;</span>] (as default parameters to ENTRYPOINT)</span></span><br><span class=\"line\"><span class=\"keyword\">CMD</span><span class=\"language-bash\"> <span class=\"built_in\">command</span> param1 param2 (shell form)</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"3-6-WORKDIR-命令\"><a href=\"#3-6-WORKDIR-命令\" class=\"headerlink\" title=\"3.6 WORKDIR 命令\"></a>3.6 WORKDIR 命令</h4><ul>\n<li><p>用来为Dockerfile中的任何RUN、CMD、ENTRYPOINT、COPY和ADD指令设置工作目录。如果WORKDIR不存在，即使它没有在任何后续Dockerfile指令中使用，它也将被创建。</p>\n</li>\n<li><p>语法:</p>\n  <figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">WORKDIR</span><span class=\"language-bash\"> /path/to/workdir</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">WORKDIR</span><span class=\"language-bash\"> /a</span></span><br><span class=\"line\"><span class=\"keyword\">WORKDIR</span><span class=\"language-bash\"> b</span></span><br><span class=\"line\"><span class=\"keyword\">WORKDIR</span><span class=\"language-bash\"> c</span></span><br><span class=\"line\">`注意:<span class=\"keyword\">WORKDIR</span><span class=\"language-bash\">指令可以在Dockerfile中多次使用。如果提供了相对路径，则该路径将与先前WORKDIR指令的路径相对`</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"3-7-ENV-命令\"><a href=\"#3-7-ENV-命令\" class=\"headerlink\" title=\"3.7 ENV 命令\"></a>3.7 ENV 命令</h4><ul>\n<li><p>用来为构建镜像设置环境变量。这个值将出现在构建阶段中所有后续指令的环境中。</p>\n</li>\n<li><p>语法：</p>\n  <figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ENV</span> &lt;key&gt; &lt;value&gt;</span><br><span class=\"line\"><span class=\"keyword\">ENV</span> &lt;key&gt;=&lt;value&gt; ...</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"3-8-ADD-命令\"><a href=\"#3-8-ADD-命令\" class=\"headerlink\" title=\"3.8 ADD 命令\"></a>3.8 ADD 命令</h4><ul>\n<li><p>用来从context上下文复制新文件、目录或远程文件url，并将它们添加到位于指定路径的映像文件系统中。</p>\n</li>\n<li><p>语法:</p>\n  <figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ADD</span><span class=\"language-bash\"> hom* /mydir/       通配符添加多个文件</span></span><br><span class=\"line\"><span class=\"keyword\">ADD</span><span class=\"language-bash\"> hom?.txt /mydir/   通配符添加</span></span><br><span class=\"line\"><span class=\"keyword\">ADD</span><span class=\"language-bash\"> test.txt relativeDir/  可以指定相对路径</span></span><br><span class=\"line\"><span class=\"keyword\">ADD</span><span class=\"language-bash\"> test.txt /absoluteDir/ 也可以指定绝对路径</span></span><br><span class=\"line\"><span class=\"keyword\">ADD</span><span class=\"language-bash\"> url </span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"3-9-COPY-命令\"><a href=\"#3-9-COPY-命令\" class=\"headerlink\" title=\"3.9 COPY 命令\"></a>3.9 COPY 命令</h4><ul>\n<li><p>用来将context目录中指定文件复制到镜像的指定目录中</p>\n</li>\n<li><p>语法:</p>\n  <figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">COPY</span><span class=\"language-bash\"> src dest</span></span><br><span class=\"line\"><span class=\"keyword\">COPY</span><span class=\"language-bash\"> [<span class=\"string\">&quot;&lt;src&gt;&quot;</span>,... <span class=\"string\">&quot;&lt;dest&gt;&quot;</span>]</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"3-10-VOLUME-命令\"><a href=\"#3-10-VOLUME-命令\" class=\"headerlink\" title=\"3.10 VOLUME 命令\"></a>3.10 VOLUME 命令</h4><ul>\n<li><p>用来定义容器运行时可以挂在到宿主机的目录</p>\n</li>\n<li><p>语法:</p>\n  <figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">VOLUME</span><span class=\"language-bash\"> [<span class=\"string\">&quot;/data&quot;</span>]</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"3-11-ENTRYPOINT命令\"><a href=\"#3-11-ENTRYPOINT命令\" class=\"headerlink\" title=\"3.11 ENTRYPOINT命令\"></a>3.11 ENTRYPOINT命令</h4><ul>\n<li><p>用来指定容器启动时执行命令和CMD类似</p>\n</li>\n<li><p>语法:</p>\n  <figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">&quot;executable&quot;</span>, <span class=\"string\">&quot;param1&quot;</span>, <span class=\"string\">&quot;param2&quot;</span>]</span><br><span class=\"line\"><span class=\"keyword\">ENTRYPOINT</span><span class=\"language-bash\"> <span class=\"built_in\">command</span> param1 param2</span></span><br></pre></td></tr></table></figure>\n\n<p>  ENTRYPOINT指令，往往用于设置容器启动后的<strong>第一个命令</strong>，这对一个容器来说往往是固定的。<br>  CMD指令，往往用于设置容器启动的第一个命令的<strong>默认参数</strong>，这对一个容器来说可以是变化的。</p>\n</li>\n</ul>\n<h2 id=\"Dockerfile构建HEXO项目部署\"><a href=\"#Dockerfile构建HEXO项目部署\" class=\"headerlink\" title=\"Dockerfile构建HEXO项目部署\"></a>Dockerfile构建HEXO项目部署</h2><h4 id=\"1-编写Dockerfile\"><a href=\"#1-编写Dockerfile\" class=\"headerlink\" title=\"1.编写Dockerfile\"></a>1.编写Dockerfile</h4><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> centos:<span class=\"number\">7</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> [<span class=\"string\">&quot;yum&quot;</span>,<span class=\"string\">&quot;install&quot;</span>,<span class=\"string\">&quot;-y&quot;</span>,<span class=\"string\">&quot;git&quot;</span>,<span class=\"string\">&quot;vim&quot;</span>]</span></span><br><span class=\"line\"><span class=\"keyword\">WORKDIR</span><span class=\"language-bash\"> /home/hexo</span></span><br><span class=\"line\"><span class=\"keyword\">EXPOSE</span> <span class=\"number\">4000</span></span><br><span class=\"line\"><span class=\"comment\">#安装nodejs</span></span><br><span class=\"line\"><span class=\"keyword\">ADD</span><span class=\"language-bash\"> https://nodejs.org/dist/v16.13.2/node-v16.13.2-linux-x64.tar.xz /home</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> <span class=\"built_in\">mkdir</span> -p /usr/local/lib/nodejs</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> tar -xJvf /home/node*.tar.xz</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> <span class=\"built_in\">mv</span> node-*-linux-x64 /usr/local/nodejs </span></span><br><span class=\"line\"><span class=\"keyword\">ENV</span> PATH=$PATH:<span class=\"string\">&#x27;/usr/local/nodejs/bin&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">#安装hexo</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> npm install hexo-cli -g</span></span><br><span class=\"line\"><span class=\"keyword\">ENV</span> PATH=<span class=\"string\">&quot;$PATH:./node_modules/.bin&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">RUN</span><span class=\"language-bash\"> hexo init</span></span><br><span class=\"line\"><span class=\"keyword\">CMD</span><span class=\"language-bash\"> hexo server</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-构建镜像\"><a href=\"#2-构建镜像\" class=\"headerlink\" title=\"2.构建镜像\"></a>2.构建镜像</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ems]<span class=\"comment\"># docker build -t hexo1.0 .</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-运行镜像\"><a href=\"#3-运行镜像\" class=\"headerlink\" title=\"3.运行镜像\"></a>3.运行镜像</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ems]<span class=\"comment\"># docker run -d -p 8080:4000 --name hexo hexo1.0</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-访问项目\"><a href=\"#4-访问项目\" class=\"headerlink\" title=\"4.访问项目\"></a>4.访问项目</h4><figure class=\"highlight http\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://127.0.0.1:4000</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"/images/Dockerflie/image-20221024140355495.png\" alt=\"image-20221024140355495\"></p>\n","feature":true,"text":"Dockerfile1. 什么是DockerfileDockerfile可以认为是Docker镜像的描述文件，是由一系列命令和参数构成的脚本。主要作用是用来构建docker镜像的构建文件。 通过架构图可以看出通过DockerFile可以直接构建镜像 2. Dockerfile解析...","link":"","photos":[],"count_time":{"symbolsCount":"3.5k","symbolsTime":"3 mins."},"categories":[{"name":"Docker","slug":"Docker","count":6,"path":"api/categories/Docker.json"}],"tags":[{"name":"Docker","slug":"Docker","count":6,"path":"api/tags/Docker.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Dockerfile\"><span class=\"toc-text\">Dockerfile</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E4%BB%80%E4%B9%88%E6%98%AFDockerfile\"><span class=\"toc-text\">1. 什么是Dockerfile</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-Dockerfile%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">2. Dockerfile解析过程</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-Dockerfile%E7%9A%84%E4%BF%9D%E7%95%99%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3 .Dockerfile的保留命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-FROM-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.1 FROM 命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-MAINTAINER-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.2 MAINTAINER  命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-3-RUN-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.3 RUN 命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-4-EXPOSE-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.4 EXPOSE 命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-5-CMD-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.5 CMD 命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-6-WORKDIR-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.6 WORKDIR 命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-7-ENV-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.7 ENV 命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-8-ADD-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.8 ADD 命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-9-COPY-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.9 COPY 命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-10-VOLUME-%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.10 VOLUME 命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-11-ENTRYPOINT%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.11 ENTRYPOINT命令</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Dockerfile%E6%9E%84%E5%BB%BAHEXO%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2\"><span class=\"toc-text\">Dockerfile构建HEXO项目部署</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E7%BC%96%E5%86%99Dockerfile\"><span class=\"toc-text\">1.编写Dockerfile</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">2.构建镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E8%BF%90%E8%A1%8C%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">3.运行镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-%E8%AE%BF%E9%97%AE%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">4.访问项目</span></a></li></ol></li></ol></li></ol>","author":{"name":"Brevin","slug":"blog-author","avatar":"/images/avatar.jpeg","link":"/","description":"Welcome to my blog <br/> I'm Brevin Bao.-a DevOps.","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Docker-Compose","uid":"0361f9a39ac53c480f13924da3215802","slug":"Docker-Compose","date":"2022-10-16T02:38:51.000Z","updated":"2022-10-26T04:21:20.610Z","comments":true,"path":"api/articles/Docker-Compose.json","keywords":"Brevin, blog, 技术, 博客","cover":"/images/docker-compose.jpg","text":"简介Compose 项目是 Docker 官方的开源项目，负责实现对 Docker 容器集群的快速编排。从功能上看，跟 OpenStack 中的 Heat 十分类似。 其代码目前在 https://github.com/docker/compose 上开源。 Compose 定位...","link":"","photos":[],"count_time":{"symbolsCount":"7.7k","symbolsTime":"7 mins."},"categories":[{"name":"Docker","slug":"Docker","count":6,"path":"api/categories/Docker.json"}],"tags":[{"name":"Docker","slug":"Docker","count":6,"path":"api/tags/Docker.json"}],"author":{"name":"Brevin","slug":"blog-author","avatar":"/images/avatar.jpeg","link":"/","description":"Welcome to my blog <br/> I'm Brevin Bao.-a DevOps.","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"Docker网络详解","uid":"2e8be22ca0c67568a1ab56634abc99c8","slug":"Docker网络详解","date":"2021-10-29T02:23:20.000Z","updated":"2022-10-24T05:03:29.459Z","comments":true,"path":"api/articles/Docker网络详解.json","keywords":"Brevin, blog, 技术, 博客","cover":"/images/docker/docker.png","text":" 理解Docker0ip addr #查看本机网络网卡有三个网络问题：Docker是如何处理容器网络访问的？ 1234567891011121314151617181920212223242526[root@vm22 ~]# docker run -d -P --name tom...","link":"","photos":[],"count_time":{"symbolsCount":"5.1k","symbolsTime":"5 mins."},"categories":[{"name":"Docker","slug":"Docker","count":6,"path":"api/categories/Docker.json"}],"tags":[{"name":"Docker","slug":"Docker","count":6,"path":"api/tags/Docker.json"}],"author":{"name":"Brevin","slug":"blog-author","avatar":"/images/avatar.jpeg","link":"/","description":"Welcome to my blog <br/> I'm Brevin Bao.-a DevOps.","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}